# 总结：
整体过程：
首先 CSS 选择器这个名称，觉得好像 CSS 规则是 DOM 树构建好了以后，再进行选择并给它添加样式的。实际上，这个过程并不是这样的。浏览器会尽量流式处理整个过程。构建 DOM 的过程是：从父到子，从先到后，一个一个节点构造，并且挂载到 DOM 树上的，那么这个过程中，我们是否能同步把 CSS 属性计算出来呢？答案是肯定的。在这个过程中，我们依次拿到上一步构造好的元素，去检查它匹配到了哪些规则，再根据规则的优先级，做覆盖和调整。从这个角度看，所谓的选择器，应该被理解成“匹配器”才更合适。
# css 的计算：
------------------------------------
- 当我们创建一个元素后，立即计算css；
- 理论上当我们分析一个元素的时候，所有css规则已经收集完毕；
- 在真实浏览器中可能遇到写在body的style标签；需要重新对css回溯计算；这里忽略；
-----------------------------
- 在computecss function中，要知道元素的父元素才能知道元素和规则是否匹配；
- 我们从上一步的stack可以获得本元素的父元素；
- 因为我们首先获得的元素是当前元素，所以我们获得和计算父元素都是由内到外；
----------------------------
- 选择器也要从当前元素向外排列；
- 复杂选择器拆成针对单个元素的选择器，用循环匹配父元素序列
------------------------------
- 根据选择器的类型和属性计算是否与当前元素匹配
- 这里仅仅实现了基本的三种，实际复杂得多
